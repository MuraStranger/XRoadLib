version: "{build}"
branches:
  only:
    - master
init:
  - git config --global core.autocrlf true
environment:
  matrix:
    - FRAMEWORK: netcoreapp1.0
    - FRAMEWORK: net451
configuration: Release
build: off
before_test:
  - ps: >-
      (new-object net.webclient).DownloadFile('https://download.microsoft.com/download/0/A/3/0A372822-205D-4A86-BFA7-084D2CBE9EDF/DotNetCore.1.0.1-SDK.1.0.0.Preview2-003131-x64.exe', 'core.exe')

      core.exe /install /quiet /norestart

      dotnet restore src test
test_script:
  - cmd: dotnet test test\XRoadLib.Tests --framework %FRAMEWORK%
